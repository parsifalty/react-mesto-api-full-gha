{"ast":null,"code":"import _toConsumableArray from\"/Users/litvacpaul/Desktop/react-mesto-auth/react-mesto-auth/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/Users/litvacpaul/Desktop/react-mesto-auth/react-mesto-auth/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from\"react\";import\"../App.css\";import Header from\"./Header.js\";import Main from\"./Main.js\";import Footer from\"./Footer.js\";import ImagePopup from\"./ImagePopup.js\";import api from\"../utils/Api.js\";import CurrentUserContext from\"../contexts/CurrentUserContext\";import EditProfilePopup from\"./EditProfilePopup\";import EditAvatarPopup from\"./EditAvatarPopup\";import AddPlacePopup from\"./AddPlacePopup\";import DeletePopup from\"./DeletePopup\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _React$useState=React.useState([]),_React$useState2=_slicedToArray(_React$useState,2),cards=_React$useState2[0],setCards=_React$useState2[1];var _React$useState3=React.useState({}),_React$useState4=_slicedToArray(_React$useState3,2),currentUser=_React$useState4[0],setCurrentUser=_React$useState4[1];var _React$useState5=React.useState(null),_React$useState6=_slicedToArray(_React$useState5,2),selectedCard=_React$useState6[0],setSelectedCard=_React$useState6[1];var _React$useState7=React.useState(false),_React$useState8=_slicedToArray(_React$useState7,2),isEditProfilePopupOpen=_React$useState8[0],setIsEditProfilePopupOpen=_React$useState8[1];var _React$useState9=React.useState(false),_React$useState10=_slicedToArray(_React$useState9,2),isAddPlacePopupOpen=_React$useState10[0],setIsAddPlacePopupOpen=_React$useState10[1];var _React$useState11=React.useState(false),_React$useState12=_slicedToArray(_React$useState11,2),isEditAvatarPopupOpen=_React$useState12[0],setIsEditAvatarPopupOpen=_React$useState12[1];var _React$useState13=React.useState(null),_React$useState14=_slicedToArray(_React$useState13,2),deleteConfirm=_React$useState14[0],setDeleteConfirm=_React$useState14[1];function handleEditAvatarClick(){setIsEditAvatarPopupOpen(true);}function handleEditProfileClick(){setIsEditProfilePopupOpen(true);}function handleAppPlaceClick(){setIsAddPlacePopupOpen(true);}function handleCardClick(card){setSelectedCard(card);}function handleDeleteCard(card){setDeleteConfirm(card);}function closeAllPopups(){setIsAddPlacePopupOpen(false);setIsEditAvatarPopupOpen(false);setIsEditProfilePopupOpen(false);setSelectedCard(null);setDeleteConfirm(null);}function handleCardLike(card){var isLiked=card.likes.some(function(i){return i._id===currentUser._id;});api.changeLikeCardStatus(card._id,!isLiked).then(function(newCard){setCards(function(state){return state.map(function(c){return c._id===card._id?newCard:c;});});});}function handleCardDelete(id){api.deleteCard(id).then(function(card){setCards(function(){return cards.filter(function(c){return c._id!==id;});});closeAllPopups();}).catch(function(err){return console.error(err);});}function handleSubmitUserForm(obj){api.setNewUserInfo(obj).then(function(res){setCurrentUser(res);closeAllPopups();}).catch(function(err){return console.error(err);});}function handleAvatarUserForm(avatar){api.addNewAvatar(avatar).then(function(res){setCurrentUser(res);closeAllPopups();}).catch(function(err){return console.error(err);});}function handleAddPlaceSubmit(card){api.addCard(card).then(function(res){setCards([res].concat(_toConsumableArray(cards)));closeAllPopups();}).catch(function(err){return console.error(err);});}React.useEffect(function(){Promise.all([api.getUserFromServer(),api.getInitialCards()]).then(function(_ref){var _ref2=_slicedToArray(_ref,2),user=_ref2[0],cardsList=_ref2[1];setCards(cardsList);setCurrentUser(user);}).catch(function(err){return console.error(err);});},[]);return/*#__PURE__*/_jsx(CurrentUserContext.Provider,{value:currentUser,children:/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(Main,{onEditProfile:handleEditProfileClick,onAddPlace:handleAppPlaceClick,onEditAvatar:handleEditAvatarClick,handleCardClick:handleCardClick,onCardLike:handleCardLike,cards:cards,onDelete:handleDeleteCard}),/*#__PURE__*/_jsx(Footer,{}),/*#__PURE__*/_jsx(EditProfilePopup,{onSubmit:handleSubmitUserForm,isOpen:isEditProfilePopupOpen,onClose:closeAllPopups}),/*#__PURE__*/_jsx(EditAvatarPopup,{onSubmit:handleAvatarUserForm,isOpen:isEditAvatarPopupOpen,onClose:closeAllPopups}),/*#__PURE__*/_jsx(AddPlacePopup,{onSubmit:handleAddPlaceSubmit,isOpen:isAddPlacePopupOpen,onClose:closeAllPopups}),/*#__PURE__*/_jsx(ImagePopup,{onClose:closeAllPopups,card:selectedCard}),/*#__PURE__*/_jsx(DeletePopup,{onClose:closeAllPopups,card:deleteConfirm,onDelete:handleCardDelete})]})});}export default App;","map":{"version":3,"names":["React","Header","Main","Footer","ImagePopup","api","CurrentUserContext","EditProfilePopup","EditAvatarPopup","AddPlacePopup","DeletePopup","jsx","_jsx","jsxs","_jsxs","App","_React$useState","useState","_React$useState2","_slicedToArray","cards","setCards","_React$useState3","_React$useState4","currentUser","setCurrentUser","_React$useState5","_React$useState6","selectedCard","setSelectedCard","_React$useState7","_React$useState8","isEditProfilePopupOpen","setIsEditProfilePopupOpen","_React$useState9","_React$useState10","isAddPlacePopupOpen","setIsAddPlacePopupOpen","_React$useState11","_React$useState12","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","_React$useState13","_React$useState14","deleteConfirm","setDeleteConfirm","handleEditAvatarClick","handleEditProfileClick","handleAppPlaceClick","handleCardClick","card","handleDeleteCard","closeAllPopups","handleCardLike","isLiked","likes","some","i","_id","changeLikeCardStatus","then","newCard","state","map","c","handleCardDelete","id","deleteCard","filter","catch","err","console","error","handleSubmitUserForm","obj","setNewUserInfo","res","handleAvatarUserForm","avatar","addNewAvatar","handleAddPlaceSubmit","addCard","concat","_toConsumableArray","useEffect","Promise","all","getUserFromServer","getInitialCards","_ref","_ref2","user","cardsList","Provider","value","children","className","onEditProfile","onAddPlace","onEditAvatar","onCardLike","onDelete","onSubmit","isOpen","onClose"],"sources":["/Users/litvacpaul/Desktop/react-mesto-auth/react-mesto-auth/src/components/App.js"],"sourcesContent":["import React from \"react\";\nimport \"../App.css\";\nimport Header from \"./Header.js\";\nimport Main from \"./Main.js\";\nimport Footer from \"./Footer.js\";\nimport ImagePopup from \"./ImagePopup.js\";\nimport api from \"../utils/Api.js\";\nimport CurrentUserContext from \"../contexts/CurrentUserContext\";\nimport EditProfilePopup from \"./EditProfilePopup\";\nimport EditAvatarPopup from \"./EditAvatarPopup\";\nimport AddPlacePopup from \"./AddPlacePopup\";\nimport DeletePopup from \"./DeletePopup\";\n\nfunction App() {\n  const [cards, setCards] = React.useState([]);\n\n  const [currentUser, setCurrentUser] = React.useState({});\n\n  const [selectedCard, setSelectedCard] = React.useState(null);\n\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] =\n    React.useState(false);\n\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = React.useState(false);\n\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] =\n    React.useState(false);\n\n  const [deleteConfirm, setDeleteConfirm] = React.useState(null);\n\n  function handleEditAvatarClick() {\n    setIsEditAvatarPopupOpen(true);\n  }\n  function handleEditProfileClick() {\n    setIsEditProfilePopupOpen(true);\n  }\n  function handleAppPlaceClick() {\n    setIsAddPlacePopupOpen(true);\n  }\n\n  function handleCardClick(card) {\n    setSelectedCard(card);\n  }\n\n  function handleDeleteCard(card) {\n    setDeleteConfirm(card);\n  }\n\n  function closeAllPopups() {\n    setIsAddPlacePopupOpen(false);\n    setIsEditAvatarPopupOpen(false);\n    setIsEditProfilePopupOpen(false);\n    setSelectedCard(null);\n    setDeleteConfirm(null);\n  }\n\n  function handleCardLike(card) {\n    const isLiked = card.likes.some((i) => i._id === currentUser._id);\n    api.changeLikeCardStatus(card._id, !isLiked).then((newCard) => {\n      setCards((state) => state.map((c) => (c._id === card._id ? newCard : c)));\n    });\n  }\n\n  function handleCardDelete(id) {\n    api\n      .deleteCard(id)\n      .then((card) => {\n        setCards(() => cards.filter((c) => c._id !== id));\n        closeAllPopups();\n      })\n      .catch((err) => console.error(err));\n  }\n\n  function handleSubmitUserForm(obj) {\n    api\n      .setNewUserInfo(obj)\n      .then((res) => {\n        setCurrentUser(res);\n        closeAllPopups();\n      })\n      .catch((err) => console.error(err));\n  }\n\n  function handleAvatarUserForm(avatar) {\n    api\n      .addNewAvatar(avatar)\n      .then((res) => {\n        setCurrentUser(res);\n        closeAllPopups();\n      })\n      .catch((err) => console.error(err));\n  }\n\n  function handleAddPlaceSubmit(card) {\n    api\n      .addCard(card)\n      .then((res) => {\n        setCards([res, ...cards]);\n        closeAllPopups();\n      })\n      .catch((err) => console.error(err));\n  }\n\n  React.useEffect(() => {\n    Promise.all([api.getUserFromServer(), api.getInitialCards()])\n      .then(([user, cardsList]) => {\n        setCards(cardsList);\n        setCurrentUser(user);\n      })\n      .catch((err) => console.error(err));\n  }, []);\n\n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n      <div className=\"App\">\n        <Header />\n        <Main\n          onEditProfile={handleEditProfileClick}\n          onAddPlace={handleAppPlaceClick}\n          onEditAvatar={handleEditAvatarClick}\n          handleCardClick={handleCardClick}\n          onCardLike={handleCardLike}\n          cards={cards}\n          onDelete={handleDeleteCard}\n        />\n        <Footer />\n\n        <EditProfilePopup\n          onSubmit={handleSubmitUserForm}\n          isOpen={isEditProfilePopupOpen}\n          onClose={closeAllPopups}\n        />\n\n        <EditAvatarPopup\n          onSubmit={handleAvatarUserForm}\n          isOpen={isEditAvatarPopupOpen}\n          onClose={closeAllPopups}\n        />\n\n        <AddPlacePopup\n          onSubmit={handleAddPlaceSubmit}\n          isOpen={isAddPlacePopupOpen}\n          onClose={closeAllPopups}\n        />\n\n        <ImagePopup onClose={closeAllPopups} card={selectedCard} />\n\n        <DeletePopup\n          onClose={closeAllPopups}\n          card={deleteConfirm}\n          onDelete={handleCardDelete}\n        />\n      </div>\n    </CurrentUserContext.Provider>\n  );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}